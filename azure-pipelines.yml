variables:
- name: BuildParameters.workingDirectory
  value: ''
- name: BuildParameters.workingDir
  value: ''
resources:
  repositories:
  - repository: self
    type: git
    ref: refs/heads/main

jobs:
- job: Job_1
  displayName: 'Windows '
  pool:
    vmImage: windows-latest
  steps:
  - checkout: self
    clean: true
    fetchTags: false
  - task: NodeTool@0
    displayName: Node Installation
    inputs:
      versionSpec: 16.x
  - task: CmdLine@2
    displayName: Install PlayWright
    inputs:
      script: npm i && npx playwright install
      workingDirectory: $(BuildParameters.workingDirectory)
  - task: Npm@1
    displayName: Execute Test
    inputs:
      command: custom
      workingDir: $(BuildParameters.workingDir)
      verbose: false
      customCommand: run windowtest
  - task: PublishHtmlReport@1
    displayName: Publish Html Report
    inputs:
      tabName: Playwright Report
      reportDir: playwright-report/windows/index.html

- job: Job_2
  displayName: 'ubuntu'
  pool:
    vmImage: ubuntu-latest
  steps:
  - checkout: self
    clean: true
    fetchTags: false
  - task: NodeTool@0
    displayName: Node Installation
    inputs:
      versionSpec: 16.x
  - task: CmdLine@2
    displayName: Install PlayWright
    inputs:
      script: npm i && npx playwright install
      workingDirectory: $(BuildParameters.workingDirectory)
  - task: Npm@1
    displayName: Execute Test
    inputs:
      command: custom
      workingDir: $(BuildParameters.workingDir)
      verbose: false
      customCommand: run windowtest
  - task: PublishHtmlReport@1
    displayName: Publish Html Report
    inputs:
      tabName: Playwright Report
      reportDir: playwright-report/windows/index.html

...
